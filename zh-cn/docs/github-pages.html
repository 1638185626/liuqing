<hr>
<h2 id="title-在-GitHub-Pages-上部署-Hexo"><a href="#title-在-GitHub-Pages-上部署-Hexo" class="headerlink" title="title: 在 GitHub Pages 上部署 Hexo"></a>title: 在 GitHub Pages 上部署 Hexo</h2><p>本文将使用 <a href="https://docs.github.com/zh/actions">GitHub Actions</a> 部署至 GitHub Pages，此方法适用于公开或私人储存库。若你不希望将源文件夹上传到 GitHub，请参阅 <a href="#%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2">一键部署</a>。</p>
<ol>
<li>建立名为 <code>&lt;你的 GitHub 用户名&gt;.github.io</code> 的储存库，若之前已将 Hexo 上传至其他储存库，将该储存库重命名即可。</li>
<li>将 Hexo 文件夹中的文件 push 到储存库的默认分支，默认分支通常名为 <code>main</code>，旧一点的储存库可能名为 <code>master</code>。</li>
</ol>
<ul>
<li><p>将 <code>main</code> 分支 push 到 GitHub：</p>
<pre><code>$ git push -u origin main
</code></pre>
</li>
<li><p>默认情况下 <code>public/</code> 不会被上传(也不该被上传)，确保 <code>.gitignore</code> 文件中包含一行 <code>public/</code>。整体文件夹结构应该与 <a href="https://github.com/hexojs/hexo-starter">范例储存库</a> 大致相似。</p>
</li>
</ul>
<ol start="3">
<li>使用 <code>node --version</code> 指令检查你电脑上的 Node.js 版本，并记下该版本 (例如：<code>v16.y.z</code>)</li>
<li>在储存库中建立 <code>.github/workflows/pages.yml</code>，并填入以下内容 (将 <code>16</code> 替换为上个步骤中记下的版本)：</li>
</ol>
<pre><code class="yml">name: Pages

on:
  push:
    branches:
      - main # default branch

jobs:
  pages:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js 16.x
        uses: actions/setup-node@v2
        with:
          node-version: &quot;16&quot;
      - name: Cache NPM dependencies
        uses: actions/cache@v2
        with:
          path: node_modules
          key: ${{ runner.OS }}-npm-cache
          restore-keys: |
            ${{ runner.OS }}-npm-cache
      - name: Install Dependencies
        run: npm install
      - name: Build
        run: npm run build
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
</code></pre>
<ol start="5">
<li>当部署作业完成后，产生的页面会放在储存库中的 <code>gh-pages</code> 分支。</li>
<li>在储存库中前往 <code>Settings &gt; Pages &gt; Source</code>，并将 branch 改为 <code>gh-pages</code>。</li>
<li>前往 <code>https://&lt;你的 GitHub 用户名&gt;.github.io</code> 查看网站。</li>
</ol>
<p>{% note info CNAME %}<br>若你使用了一个带有 <code>CNAME</code> 的自定义域名，你需要在 <code>source/</code> 文件夹中新增 <code>CNAME</code> 文件。 <a href="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">更多信息</a><br>{% endnote %}</p>
<h2 id="项目页面"><a href="#项目页面" class="headerlink" title="项目页面"></a>项目页面</h2><p>如果你希望网站部署在 <code>&lt;你的 GitHub 用户名&gt;.github.io</code> 的子目录中：</p>
<ol>
<li>建立名为 <code>&lt;repository 的名字&gt;</code> 的储存库，这样你的博客网址为 <code>&lt;你的 GitHub 用户名&gt;.github.io/&lt;repository 的名字&gt;</code>，repository 的名字可以任意，例如 blog 或 hexo。</li>
<li>编辑你的 <code>_config.yml</code>，将 <code>url:</code> 更改为 <code>&lt;你的 GitHub 用户名&gt;.github.io/&lt;repository 的名字&gt;</code>。</li>
<li>Commit 并 push 到默认分支上。</li>
<li>当部署完成后，在 <code>gh-pages</code> 分支可以找到生成的网页。</li>
<li>在 GitHub 储存库中，前往 <code>Settings &gt; Pages &gt; Source</code>，并将 branch 改为 <code>gh-pages</code>。</li>
<li>前往 <code>https://&lt;你的 GitHub 用户名&gt;.github.io/&lt;repository 的名字&gt;</code> 查看网站。</li>
</ol>
<h2 id="一键部署"><a href="#一键部署" class="headerlink" title="一键部署"></a>一键部署</h2><p>以下教学改编自 <a href="/zh-cn/docs/one-command-deployment">一键部署</a>。</p>
<ol>
<li>安装 <a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-git</a>。</li>
<li>在 <code>_config.yml</code> 中添加以下配置（如果配置已经存在，请将其替换为如下）:</li>
</ol>
<pre><code class="yml">deploy:
  type: git
  repo: https://github.com/&lt;username&gt;/&lt;project&gt;
  # example, https://github.com/hexojs/hexojs.github.io
  branch: gh-pages
</code></pre>
<ol start="3">
<li>执行 <code>hexo clean &amp;&amp; hexo deploy</code> 。</li>
<li>浏览 <code>&lt;GitHub 用户名&gt;.github.io</code> 检查你的网站能否运作。</li>
</ol>
<p>{% note info Windows 用户 %}<br><a href="https://github.com/hexojs/awesome-hexo">Awesome Hexo</a> 中收录了更多有关在 GitHub Pages 上部署 Hexo ，你也可通过搜索引擎了解更多。<br>欢迎更多有志之士前来改善 Hexo 文档，不胜感激。<br>{% endnote %}</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://docs.github.com/zh/pages">GitHub Pages 使用文档</a></li>
<li><a href="https://github.com/marketplace/actions/github-pages-action">peaceiris&#x2F;actions-gh-pages</a></li>
</ul>
